<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>자동차 견적</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        //jQuery 사용 자동차 견적내기
        //자동차 기본가액에 옵션 추가된 금액을 계산해서 표시하세요.
        //차량기초가액 + 옵션체크된 금액 찾아서 합산

        var initTotal; //차량기초가액
        $(function () {
            initTotal = parseInt($("#total").val());

            // $(".opt").change(function(){
            //     console.log(">>현재 이벤트 발생 : " + this.id);
            //     //계산 전에 차량기초가액으로 초기화
            //     let total = initTotal;
            //     //체크된 옵션찾아서 기초가액에 합산.
            //     $(".opt:checked").each(function(){
            //         console.log("체크 : " + this.id);
            //         total += parseInt(this.value);
            //     });
            //     $("#total").val(total);
            // });
            $(".opt").change(coputeAll);
        }); //end

        //function 따로 빼주기!
        function coputeAll() {
            console.log(">> 현재 이벤트 발생 option : " + this.id);

            let total = initTotal; //계산전에 차량기초가액으로 초기화
            //체크된 옵션찾아서 차량기초가액에 합산
            $(".opt:checked").each(function () {
                console.log("체크된 옵션 id : " + this.id);
                total += parseInt(this.value);
                //total += parseInt($(this).val()); //jQuery 객체 메소드 사용
            });

            //합계 설정
            $("#total").val(total);
        }
    </script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
        }


        table {
            width: 600px;
            background-color: pink;
            border-radius: 5px;
        }

        th,
        td {

            text-align: center;
        }

        tfoot td:first-child {
            background-color: pink;
        }

        h1 {
            padding: 0 230px;
        }

        img {
            width: 600px;
            transition: 300ms;
        }

        img:hover {
            transform: rotate(-10deg) scale(1.1);
        }
    </style>
</head>

<body>
    <div id="carZone">
        <h1>자동차 견적</h1>
        <p><img src="imgs/쿠페.png" alt="자동차이미지"></p>
        <table id="car">
            <colgroup>
                <col width="50%">
                <col width="30%">
            </colgroup>
            <thead>
                <tr>
                    <th>옵션</th>
                    <th>추가가격</th>
                    <th>선택여부</th>
                </tr>
            </thead>
            <tbody>
                <form name="frm1">
                    <tr>
                        <td>인조가죽시트</td>
                        <td>250000</td>
                        <td>
                            <!-- 체크박스 인조가죽시트 -->
                            <input type="checkbox" value="250000" id="opt1" class="opt" name="opt1">
                        </td>
                    </tr>
                    <tr>
                        <td>네비게이션</td>
                        <td>300000</td>
                        <td>
                            <!-- 체크박스 네비게이션 -->
                            <input type="checkbox" value="300000" id="opt2" class="opt" name="opt2">
                        </td>
                    </tr>
                    <tr>
                        <td>썬루프</td>
                        <td>440000</td>
                        <td>
                            <!-- 체크박스 썬루프 -->
                            <input type="checkbox" value="440000" id="opt3" class="opt" name="opt3">
                        </td>
                    </tr>
                </form>
            </tbody>
            <tfoot>
                <form name="frm2">
                    <tr>
                        <td id="totalTxt">차량금액(옵션포함)</td>
                        <td colspan="2">
                            <input type="text" value="0" id="total" disabled readonly>
                        </td>
                    </tr>
                </form>
            </tfoot>
        </table>
    </div>

</body>

</html>